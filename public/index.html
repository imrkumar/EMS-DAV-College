<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
        MIS
    </title>
    <link rel="stylesheet" href="/node_modules/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="/node_modules/bootstrap-icons/font/bootstrap-icons.css" />
    <link rel="stylesheet" href="CSS/style.css">
    <script src="/node_modules/bootstrap/dist/js/bootstrap.min.js"></script>
    <link rel="icon" href="images/logo.png">

</head>

<body>
    <header>
        <nav class="nav-header">
            <div class="logo-container"> <a href="index.html"><img src="images/logo.png" class="main-logo"></a></div>
            <h1 class="long-heading"> DAV COLLEGE EVENT MANAGEMENT SYSTEM</h1>
            <h1 class="short-heading">DEMS</h1>
        </nav>
        <nav class="navbar navbar-expand-lg bg-body-tertiary">
            <div class="container-fluid">
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarText"
                    aria-controls="navbarText" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarText">
                    <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                        <li class="nav-item">
                            <a class="nav-link " aria-current="page" href="index.html">HOME</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="/public/admin_login.html">ADMIN</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="dept_login.html">DEPARTMENT LOGIN</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#">CONTACT US</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="aboutus.html">ABOUT US</a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
    </header>
    <div id="carouselExampleAutoplaying" class="carousel slide p-2" data-bs-ride="carousel">
        <div class="carousel-inner">
            <div class="carousel-item active">
                <img src="https://images.bhaskarassets.com/web2images/521/2023/11/08/100_1699361253654a31e5e3280_7nov3.jpg"
                    class="d-block w-100" alt="...">
            </div>
            <div class="carousel-item">
                <img src="https://images.collegedunia.com/public/college_data/images/campusimage/15100501711big.jpg"
                    class="d-block w-100" alt="...">
            </div>

        </div>
        <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleAutoplaying"
            data-bs-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Previous</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleAutoplaying"
            data-bs-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Next</span>
        </button>
    </div><BR><br><br>
    <h2 class="mb-4" id="ue-heading">EVENT GALLERY</h2>
    <div class="buttons">
        <button class="btn btn-danger" id="b1">All Event</button>
        <button class="btn btn-danger" id="b2">Upcoming Event</button>
        <button class="btn btn-danger" id="b3">Present Event</button>
        <button class="btn btn-danger" id="b4">Past Event</button>
    </div><br>
    <div class="main" id="allEvent">

    </div>
    <div class="main" id="upcomingEvent">


    </div>
    <div class="main" id="presentEvent">

    </div>
    <div class="main" id="pastEvent">

    </div>


    <div class="container" style="border-top: 2px solid whitesmoke;">
        <footer class="py-5">
            <div class="row">
                <div class="col-6 col-md-2 mb-3">
                    <h5 style="overflow-y: hidden;">External Links</h5>
                    <ul class="nav flex-column">
                        <li class="nav-item mb-2"><a href="#" class="nav-link p-0 text-body-secondary">DAVCMC, New
                                Delhi</a></li>
                        <li class="nav-item mb-2"><a href="#" class="nav-link p-0 text-body-secondary">National Digital
                                Library</a></li>
                        <li class="nav-item mb-2"><a href="#" class="nav-link p-0 text-body-secondary">DAV
                                University</a></li>
                        <li class="nav-item mb-2"><a href="#" class="nav-link p-0 text-body-secondary">e-Shodh
                                Sindhu</a></li>
                        <li class="nav-item mb-2"><a href="#"
                                class="nav-link p-0 text-body-secondary">NList-Inflibnet</a></li>
                        <li class="nav-item mb-2"><a href="#" class="nav-link p-0 text-body-secondary">Swayam</a></li>
                        <li class="nav-item mb-2"><a href="#" class="nav-link p-0 text-body-secondary">MHRD ICT</a></li>
                        <li class="nav-item mb-2"><a href="#" class="nav-link p-0 text-body-secondary">MHRD ICT</a></li>
                        <li class="nav-item mb-2"><a href="#" class="nav-link p-0 text-body-secondary">GNDU</a></li>
                        <li class="nav-item mb-2"><a href="#" class="nav-link p-0 text-body-secondary">NAAC</a></li>
                        <li class="nav-item mb-2"><a href="#" class="nav-link p-0 text-body-secondary">UGC</a></li>

                    </ul>
                </div>

                <div class="col-6 col-md-2 mb-3">
                    <h5 style="overflow-y: hidden;">Information Link</h5>
                    <ul class="nav flex-column">
                        <li class="nav-item mb-2"><a href="#" class="nav-link p-0 text-body-secondary">Home</a></li>

                        <li class="nav-item mb-2"><a href="#" class="nav-link p-0 text-body-secondary">Contact</a></li>
                        <li class="nav-item mb-2"><a href="#" class="nav-link p-0 text-body-secondary">About</a></li>
                    </ul>
                </div>

                <div class="col-6 col-md-2 mb-3">
                    <h5 style="overflow-y: hidden;">Contact Details</h5>
                    <ul class="nav flex-column">
                        <li class="nav-item mb-2"><a href="#"
                                class="nav-link p-0 text-body-secondary">www.davcollegeasr.org</a></li>
                        <li class="nav-item mb-2"><a href="#"
                                class="nav-link p-0 text-body-secondary">davasr@yahoo.com</a></li>
                        <li class="nav-item mb-2"><a href="#" class="nav-link p-0 text-body-secondary">Katra Sher Singh,
                                I/s Hathi Gate
                                Amritsar, Punjab-143001, India.</a></li>
                        <li class="nav-item mb-2"><a href="#"
                                class="nav-link p-0 text-body-secondary">0183-2553377,2534971</a></li>
                    </ul>
                </div>

                <div class="col-md-5 offset-md-1 mb-3">
                    <div style="display: flex;">
                        <div>
                            <img src="images/logo.png">
                        </div>
                        <div>
                            <img src="images/footerlogoname.png">
                        </div>
                    </div>
                    <div>
                        <p>
                            A premier educational institution of North India, DAV College Amritsar has high academic
                            standing and a reputation for excellence in research and teaching which is reflected in the
                            demand for courses for high achieving students, the relevance of graduates to the community
                            in which they work , the quality of staff and their strong performance and commitment to
                            research. A gateway to academic and professional excellence, this multi-faculty,
                            multi-facility postgraduate (co-ed) College is famous for providing cutting edges to
                            academic and co-academic skills through its commitment to innovative and student-friendly
                            initiatives. The college has created an inimitable academic space for itself within nearly
                            five decades of its monumental existence.
                        </p>
                    </div>
                </div>
            </div>

            <div class="d-flex flex-column flex-sm-row justify-content-between py-4 my-4 border-top">
                <p>Managed and Maintained By: PG Department of Computer Science and IT, DAV College, Amritsar, All
                    Rights Reserved. Â© 2023 Coded By : <a href="" class=""> Website Committee</a> </p>
                <ul class="list-unstyled d-flex">
                    <li class="ms-3"><a class="link-body-emphasis" href="#"><svg class="bi" width="24" height="24">
                                <use xlink:href="#twitter"></use>
                            </svg></a></li>
                    <li class="ms-3"><a class="link-body-emphasis" href="#"><svg class="bi" width="24" height="24">
                                <use xlink:href="#instagram"></use>
                            </svg></a></li>
                    <li class="ms-3"><a class="link-body-emphasis" href="#"><svg class="bi" width="24" height="24">
                                <use xlink:href="#facebook"></use>
                            </svg></a></li>
                </ul>
            </div>
        </footer>
    </div>


    <script>

        const datacon1 = document.getElementById('allEvent');
        fetch("http://localhost:9090/getEventData", {
            method: "get",
        }).then((res) => {
            return res.json()
        }).then((data) => {

            data.sort((a, b) => new Date(b.eventDate) - new Date(a.eventDate));

            for (let item = 0; item < data.length; item++) {
                let div = document.createElement('div')

                div.innerHTML = `
            <div class="card">
                <div class="card-header">
                    <img src="${data[item].eventBanner}" width="100%" height="250px">
                </div>
                <div class="card-body">
                    <p class="card-text">
                        <span class="fw-bold">Event Name :</span> ${data[item].eventName}
                    </p>
                    <p class="card-text">
                        <span class="fw-bold">Event Incharge :</span> ${data[item].resourcePerson}
                    </p>
                    <p class="card-text">
                        <span class="fw-bold">Event Date :</span> ${data[item].eventDate}
                    </p>
                </div>
            </div>
       `;
                datacon1.append(div);
            }
        });

        const datacon2 = document.getElementById('upcomingEvent');
        fetch("http://localhost:9090/getEventData", {
            method: "get",
        }).then((res) => {
            return res.json()
        }).then((data) => {

            const currentDate = new Date();


            const todayEvents = data.filter(event => new Date(event.eventDate) > currentDate);


            todayEvents.sort((a, b) => new Date(a.eventDate) - currentDate - (new Date(b.eventDate) - currentDate));

            for (let item = 0; item < todayEvents.length; item++) {
                let div = document.createElement('div')


                div.innerHTML = `
                    <div class="card">
                        <div class="card-header">
                            <img src="${todayEvents[item].eventBanner}" width="100%" height="250px">
                        </div>
                        <div class="card-body">
                            <p class="card-text">
                                <span class="fw-bold">Event Name :</span> ${todayEvents[item].eventName}
                            </p>
                            <p class="card-text">
                                <span class="fw-bold">Event Incharge :</span> ${todayEvents[item].resourcePerson}
                            </p>
                            <p class="card-text">
                                <span class="fw-bold">Event Date :</span> ${todayEvents[item].eventDate}
                            </p>
                        </div>
                    </div>
               `;
                datacon2.append(div);
            }
        })


        const datacon3 = document.getElementById('presentEvent');

        fetch("http://localhost:9090/getEventData", {
            method: "get",
        }).then((res) => {
            return res.json();
        }).then((data) => {
            const currentDate = new Date();

            const todayEvents = data.filter(event => {
                const eventDate = new Date(event.eventDate);
                return eventDate.getDate() === currentDate.getDate() &&
                    eventDate.getMonth() === currentDate.getMonth() &&
                    eventDate.getFullYear() === currentDate.getFullYear();
            });

            todayEvents.forEach(event => {
                let div = document.createElement('div');

                div.innerHTML = `
                <div class="card">
                    <div class="card-header">
                        <img src="${event.eventBanner}" width="100%" height="250px">
                    </div>
                    <div class="card-body">
                        <p class="card-text">
                            <span class="fw-bold">Event Name :</span> ${event.eventName}
                        </p>
                        <p class="card-text">
                            <span class="fw-bold">Event Incharge :</span> ${event.resourcePerson}
                        </p>
                        <p class="card-text">
                            <span class="fw-bold">Event Date :</span> ${event.eventDate}
                        </p>
                    </div>
                </div>
            `;
                datacon3.append(div);
            });
        });


        const datacon4 = document.getElementById('pastEvent');
        fetch("http://localhost:9090/getEventData", {
            method: "get",
        }).then((res) => {
            return res.json()
        }).then((data) => {
            const currentDate = new Date();

            
            const pastEvents = data.filter(event => new Date(event.eventDate) < currentDate);

            pastEvents.sort((a, b) => new Date(b.eventDate) - new Date(a.eventDate));

            for (let item = 0; item < pastEvents.length; item++) {
                let div = document.createElement('div')

                div.innerHTML = `
            <div class="card">
                <div class="card-header">
                    <img src="${pastEvents[item].eventBanner}" width="100%" height="250px">
                </div>
                <div class="card-body">
                    <p class="card-text">
                        <span class="fw-bold">Event Name :</span> ${pastEvents[item].eventName}
                    </p>
                    <p class="card-text">
                        <span class="fw-bold">Event Incharge :</span> ${pastEvents[item].resourcePerson}
                    </p>
                    <p class="card-text">
                        <span class="fw-bold">Event Date :</span> ${pastEvents[item].eventDate}
                    </p>
                </div>
            </div>
       `;
                datacon4.append(div);
            }
        });


        function allEvent(block = "block") {
            document.getElementById("allEvent").style.display = block;
        }
        function upcomingEvent(block = "block") {
            document.getElementById("upcomingEvent").style.display = block;
        }
        function presentEvent(block = "block") {
            document.getElementById("presentEvent").style.display = block;
        }
        function pastEvent(block = "block") {
            document.getElementById("pastEvent").style.display = block;
        }


        // var btn = document.querySelectorAll("button");

        // btn.forEach((sbtn) => {
        //     sbtn.addEventListener('click', () => {
        //         if (sbtn.id == "b1") {
        //             allEvent();
        //             upcomingEvent("none")
        //             presentEvent("none")
        //             pastEvent("none")

        //         } else if (sbtn.id == "b2") {
        //             upcomingEvent()
        //             allEvent("none");
        //             presentEvent("none")
        //             pastEvent("none")
        //         }
        //         else if (sbtn.id == "b3") {
        //             presentEvent();
        //             allEvent("none");
        //             upcomingEvent("none")
        //             pastEvent("none")
        //         }
        //         else if (sbtn.id == "b4") {
        //             pastEvent();
        //             allEvent("none");
        //             upcomingEvent("none")
        //             presentEvent("none")
        //         }
        //     })
        // })

        function toggleEventSection(sectionId, displayValue = "flex") {
            const section = document.getElementById(sectionId);
            section.style.display = displayValue;
        }

        var btn = document.querySelectorAll("button");

        btn.forEach((sbtn) => {
            sbtn.addEventListener('click', () => {
                if (sbtn.id == "b1") {
                    toggleEventSection("allEvent");
                    toggleEventSection("upcomingEvent", "none");
                    toggleEventSection("presentEvent", "none");
                    toggleEventSection("pastEvent", "none");
                } else if (sbtn.id == "b2") {
                    toggleEventSection("upcomingEvent");
                    toggleEventSection("allEvent", "none");
                    toggleEventSection("presentEvent", "none");
                    toggleEventSection("pastEvent", "none");
                } else if (sbtn.id == "b3") {
                    toggleEventSection("presentEvent");
                    toggleEventSection("allEvent", "none");
                    toggleEventSection("upcomingEvent", "none");
                    toggleEventSection("pastEvent", "none");
                } else if (sbtn.id == "b4") {
                    toggleEventSection("pastEvent");
                    toggleEventSection("allEvent", "none");
                    toggleEventSection("upcomingEvent", "none");
                    toggleEventSection("presentEvent", "none");
                }
            });
        });





    </script>

</body>

</html>